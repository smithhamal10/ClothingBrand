<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ABC</title>
  <link rel="stylesheet" href="bag.css" />
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@300;400&display=swap" rel="stylesheet" />
</head>
<body>

<header class="navbar">
  <div class="nav-container">
    <div class="nav-left">
      <ul class="nav-links">
        <li><a href="shop.html">Collections</a></li>
        <li><a href="New_arrivals.html">NEW ARRIVALS</a></li>
      </ul>
    </div>
    <div class="nav-center">
      <a href="index.html" class="logo">NEPKIT</a>
    </div>
    <div class="nav-right">
      <ul class="nav-links">
        <li><a href="#">Search</a></li>
        <li><a href="#">Account</a></li>
        <li><a href="Bag.html">Bag</a></li>
      </ul>
    </div>
  </div>
</header>

<main class="bag-page">
  <h1 class="bag-title">Your Bag</h1>
  <div class="bag-container">
    <!-- Bag Items -->
    <div class="bag-items" id="bagItems">
      <!-- Items will be injected here dynamically -->
    </div>

    <!-- Summary -->
    <div class="bag-summary">
      <h3>Summary</h3>
      <div class="summary-row">
        <span>Subtotal</span>
        <span id="subtotalPrice">$0</span>
      </div>
      <div class="summary-row">
        <span>Shipping</span>
        <span>Free</span>
      </div>
      <div class="summary-row total">
        <span>Total</span>
        <span id="totalPrice">$0</span>
      </div>
      <button class="checkout-btn">Checkout</button>
    </div>
  </div>
</main>

<footer class="fog-footer">
  <div class="footer-container">
    <div class="footer-left">
      <p class="footer-title">Join the Conversation</p>
      <form class="footer-form">
        <input type="email" placeholder="EMAIL ADDRESS" required />
        <button type="submit">→</button>
      </form>
    </div>
    <div class="footer-right">
      <a href="#">CONTACT</a>
      <a href="#">CLIENT SERVICES</a>
      <a href="#">LEGAL NOTICES</a>
      <a href="#">SOCIAL</a>
    </div>
  </div>
</footer>

<script>
  // Scroll effect on navbar
  window.addEventListener('scroll', function () {
    const navbar = document.querySelector('.navbar');
    navbar.classList.toggle('scrolled', window.scrollY > 50);
  });

  // Load items from localStorage
  function loadBag() {
    const bag = JSON.parse(localStorage.getItem("bag")) || [];
    const container = document.getElementById("bagItems");
    const subtotalEl = document.getElementById("subtotalPrice");
    const totalEl = document.getElementById("totalPrice");

    let subtotal = 0;
    container.innerHTML = "";

    bag.forEach((item, index) => {
      subtotal += item.price;

      const div = document.createElement("div");
      div.className = "bag-item";
      div.innerHTML = `
        <img src="${item.img}" alt="${item.name}" />
        <div class="item-details">
          <h2>${item.name}</h2>
          <p>Size: ${item.size}</p>
          <p>Qty: 1</p>
          <p class="price">$${item.price}</p>
        </div>
        <button class="remove-btn" onclick="removeItem(${index})">×</button>
      `;
      container.appendChild(div);
    });

    subtotalEl.textContent = `$${subtotal}`;
    totalEl.textContent = `$${subtotal}`;
  }

  function removeItem(index) {
    let bag = JSON.parse(localStorage.getItem("bag")) || [];
    bag.splice(index, 1);
    localStorage.setItem("bag", JSON.stringify(bag));
    loadBag();
  }

  // Initialize bag on page load
  loadBag();
  function loadBag() {
  const bag = JSON.parse(localStorage.getItem("bag")) || [];
  const container = document.getElementById("bagItems");
  const subtotalEl = document.getElementById("subtotalPrice");
  const totalEl = document.getElementById("totalPrice");

  let subtotal = 0;
  container.innerHTML = "";

  if (bag.length === 0) {
    container.innerHTML = `<p class="empty-cart-message">You don't have any items in your cart.</p>`;
    subtotalEl.textContent = `$0`;
    totalEl.textContent = `$0`;
    return;
  }

  bag.forEach((item, index) => {
    subtotal += item.price;

    const div = document.createElement("div");
    div.className = "bag-item";
    div.innerHTML = `
      <img src="${item.img}" alt="${item.name}" />
      <div class="item-details">
        <h2>${item.name}</h2>
        <p>Size: ${item.size}</p>
        <p>Qty: 1</p>
        <p class="price">$${item.price}</p>
      </div>
      <button class="remove-btn" onclick="removeItem(${index})">×</button>
    `;
    container.appendChild(div);
  });

  subtotalEl.textContent = `$${subtotal}`;
  totalEl.textContent = `$${subtotal}`;
}
</script>

</body>
</html>
